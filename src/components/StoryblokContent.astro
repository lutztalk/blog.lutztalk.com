---
import { renderRichText } from "@storyblok/astro";
import type { StoryblokPost } from "@/utils/getStoryblokPosts";

type Props = {
  post: StoryblokPost;
};

const { post } = Astro.props;
const content = post.data.content;

// Render rich text if it's a Storyblok rich text object, otherwise render as HTML
let renderedContent: string = "";
if (content) {
  if (typeof content === 'object' && (content as any).type === 'doc') {
    // It's a Storyblok rich text document
    const rendered = renderRichText(content as any);
    renderedContent = rendered || "";
  } else if (typeof content === 'string') {
    // It's plain HTML or markdown
    renderedContent = content;
  } else {
    // Try to render as rich text anyway
    const rendered = renderRichText(content as any);
    renderedContent = rendered || "";
  }
}
---

{renderedContent && <div set:html={renderedContent} />}

