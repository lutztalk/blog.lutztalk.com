---
// This page handles the GitHub OAuth callback for Decap CMS.
// Decap CMS will handle the OAuth flow automatically.
// We just need this page to exist and let the CMS process the callback.
---
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Authenticating...</title>
</head>
<body>
  <div id="nc-root"></div>
  <script is:inline>
    // Suppress React errors - catch and ignore removeChild errors
    (function() {
      const originalRemoveChild = Node.prototype.removeChild;
      Node.prototype.removeChild = function(child) {
        try {
          return originalRemoveChild.call(this, child);
        } catch (e) {
          if (e instanceof Error && e.message && e.message.includes('not a child')) {
            return child;
          }
          throw e;
        }
      };
    })();
  </script>
  <script src="https://unpkg.com/decap-cms@3.8.0/dist/decap-cms.js"></script>
  <script is:inline>
    // Let Decap CMS handle the OAuth callback
    // The CMS will automatically process the URL parameters and complete authentication
    (function() {
      function initCMS() {
        var CMS = window.CMS;
        if (typeof CMS !== 'undefined' && CMS) {
          CMS.init();
        }
      }
      
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initCMS);
      } else {
        initCMS();
      }
    })();
  </script>
</body>
</html>

